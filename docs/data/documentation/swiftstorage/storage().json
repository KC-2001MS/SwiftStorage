{"identifier":{"url":"doc:\/\/SwiftStorage\/documentation\/SwiftStorage\/Storage()","interfaceLanguage":"swift"},"variants":[{"paths":["\/documentation\/swiftstorage\/storage()"],"traits":[{"interfaceLanguage":"swift"}]}],"sections":[],"kind":"symbol","hierarchy":{"paths":[["doc:\/\/SwiftStorage\/documentation\/SwiftStorage"]]},"primaryContentSections":[{"declarations":[{"tokens":[{"kind":"attribute","text":"@attached"},{"text":"(member, names: named(_$id), named(_$observationRegistrar), named(access), named(withMutation), named(className), named(store)) ","kind":"text"},{"text":"@attached","kind":"attribute"},{"kind":"text","text":"(memberAttribute) "},{"kind":"attribute","text":"@attached"},{"text":"(extension, conformances: ","kind":"text"},{"kind":"typeIdentifier","preciseIdentifier":"s:11Observation10ObservableP","text":"Observable"},{"text":") ","kind":"text"},{"kind":"keyword","text":"macro"},{"text":" ","kind":"text"},{"text":"Storage","kind":"identifier"},{"kind":"text","text":"()"}],"platforms":["macOS"],"languages":["swift"]}],"kind":"declarations"},{"content":[{"text":"Overview","type":"heading","anchor":"overview","level":2},{"inlineContent":[{"text":"Add this macro to the class as follows","type":"text"}],"type":"paragraph"},{"code":["@Storage","final class SomeClass {","    var someValue: Bool","","    init() {","        self.someValue = false","    }","}"],"syntax":"swift","type":"codeListing"},{"type":"paragraph","inlineContent":[{"type":"text","text":"When expanded, it looks like this"}]},{"syntax":"swift","type":"codeListing","code":["final class SomeClass {","    @LocalStorageProperty","    var someValue: Bool","","    init() {","        self.someValue = false","    }","","    @Transient private let _$observationRegistrar = Observation.ObservationRegistrar()","","    internal nonisolated func access<Member>(","        keyPath: KeyPath<SomeClass, Member>","    ) {","        _$observationRegistrar.access(self, keyPath: keyPath)","    }","","    internal nonisolated func withMutation<Member, MutationResult>(","        keyPath: KeyPath<SomeClass, Member>,","        _ mutation: () throws -> MutationResult","    ) rethrows -> MutationResult {","        try _$observationRegistrar.withMutation(of: self, keyPath: keyPath, mutation)","    }","","    @Transient private let className = \"SomeClass\"","}"]},{"inlineContent":[{"text":"Use the ","type":"text"},{"type":"codeVoice","code":"Transient"},{"text":" macro if there are properties you do not want to preserve. You can also use the ","type":"text"},{"type":"reference","isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/observation\/observationignored()"},{"text":" macro instead.","type":"text"}],"type":"paragraph"}],"kind":"content"}],"schemaVersion":{"patch":0,"major":0,"minor":3},"metadata":{"externalID":"s:12SwiftStorage0B0yycfm","fragments":[{"text":"macro","kind":"keyword"},{"kind":"text","text":" "},{"text":"Storage","kind":"identifier"},{"text":"()","kind":"text"}],"symbolKind":"macro","role":"symbol","title":"Storage()","modules":[{"name":"SwiftStorage"}],"roleHeading":"Macro"},"abstract":[{"text":"Macros to adapt persistence and observation to properties in a class","type":"text"}],"references":{"doc://SwiftStorage/documentation/SwiftStorage/Storage()":{"role":"symbol","kind":"symbol","identifier":"doc:\/\/SwiftStorage\/documentation\/SwiftStorage\/Storage()","fragments":[{"kind":"keyword","text":"macro"},{"kind":"text","text":" "},{"kind":"identifier","text":"Storage"},{"text":"()","kind":"text"}],"abstract":[{"text":"Macros to adapt persistence and observation to properties in a class","type":"text"}],"title":"Storage()","type":"topic","url":"\/documentation\/swiftstorage\/storage()"},"doc://SwiftStorage/documentation/SwiftStorage":{"abstract":[],"kind":"symbol","identifier":"doc:\/\/SwiftStorage\/documentation\/SwiftStorage","role":"collection","title":"SwiftStorage","url":"\/documentation\/swiftstorage","type":"topic"},"https://developer.apple.com/documentation/observation/observationignored()":{"titleInlineContent":[{"type":"text","text":"ObservationTracked"}],"type":"link","url":"https:\/\/developer.apple.com\/documentation\/observation\/observationignored()","identifier":"https:\/\/developer.apple.com\/documentation\/observation\/observationignored()","title":"ObservationTracked"}}}